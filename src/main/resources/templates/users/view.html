<!DOCTYPE html>
<!-- Página para ver los detalles completos de un usuario -->
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Título dinámico que incluye el nombre del usuario -->
    <!-- th:text="|...|": sintaxis de literal string en Thymeleaf -->
    <!-- Permite concatenar texto con variables sin usar + -->
    <!-- Equivalente en Java: "Usuario: " + user.getAdministrador() -->
    <title th:text="|Usuario: ${user.administrador}|">Detalles Usuario</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-10">

                <!-- BREADCRUMB (migas de pan para navegación) -->
                <nav aria-label="breadcrumb" class="mb-4">
                    <!-- breadcrumb: componente de Bootstrap para mostrar ruta de navegación -->
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <!-- Enlace a la página principal -->
                            <a th:href="@{/users}">
                                <i class="fas fa-home"></i> Usuarios
                            </a>
                        </li>
                        <li class="breadcrumb-item active" aria-current="page">
                            <!-- breadcrumb-item active: elemento actual (no clickeable) -->
                            <!-- aria-current="page": accesibilidad para lectores de pantalla -->
                            Detalles
                        </li>
                    </ol>
                </nav>

                <!-- CARD PRINCIPAL -->
                <div class="card shadow-lg">
                    <!-- shadow-lg: sombra más pronunciada -->

                    <div class="card-header bg-info text-white">
                        <div class="d-flex justify-content-between align-items-center">
                            <!-- d-flex: display flex -->
                            <!-- justify-content-between: espacia elementos en extremos -->
                            <!-- align-items-center: alinea verticalmente al centro -->

                            <h4 class="mb-0">
                                <i class="fas fa-user-circle"></i>
                                Información del Usuario
                            </h4>

                            <!-- Badge con el ID -->
                            <span class="badge bg-light text-dark">
                                <!-- bg-light: fondo claro -->
                                <!-- text-dark: texto oscuro -->
                                ID: <span th:text="${user.id}">1</span>
                            </span>
                        </div>
                    </div>

                    <div class="card-body">

                        <!-- INFORMACIÓN BÁSICA -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <!-- Grupo de información con ícono -->
                                <div class="mb-3">
                                    <h6 class="text-muted mb-2">
                                        <i class="fas fa-user"></i> Nombre de Administrador
                                    </h6>
                                    <p class="fs-5 fw-bold">
                                        <!-- fs-5: font-size 5 (tamaño grande) -->
                                        <!-- fw-bold: font-weight bold (negrita) -->
                                        <span th:text="${user.administrador}">admin1</span>
                                    </p>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="mb-3">
                                    <h6 class="text-muted mb-2">
                                        <i class="fas fa-list-ol"></i> Número de Cuentas
                                    </h6>
                                    <p class="fs-5">
                                        <!-- Badge grande con el número de cuentas -->
                                        <!-- th:class: clase dinámica según la cantidad -->
                                        <!-- Si cuentas > 0: bg-success (verde) -->
                                        <!-- Si cuentas = 0: bg-secondary (gris) -->
                                        <span class="badge fs-4"
                                            th:classappend="${user.cuentas > 0 ? 'bg-success' : 'bg-secondary'}"
                                            th:text="${user.cuentas}">
                                            0
                                        </span>
                                        <!-- th:classappend: AGREGA clases sin borrar las existentes -->
                                        <!-- Diferencia con th:class que REEMPLAZA todas las clases -->
                                    </p>
                                </div>
                            </div>
                        </div>

                        <hr>
                        <!-- Línea horizontal separadora -->

                        <!-- FECHAS DEL REGISTRO -->
                        <h6 class="text-muted mb-3">
                            <i class="fas fa-calendar-alt"></i> Historial de Fechas
                        </h6>

                        <div class="row">
                            <div class="col-md-6">
                                <!-- Card para fecha de registro -->
                                <div class="card bg-light">
                                    <!-- bg-light: fondo gris claro -->
                                    <div class="card-body">
                                        <h6 class="card-subtitle mb-2 text-success">
                                            <!-- text-success: color verde -->
                                            <i class="fas fa-calendar-plus"></i> Fecha de Registro
                                        </h6>
                                        <p class="card-text fs-5">
                                            <!-- #temporals.format: utilidad para formatear fechas -->
                                            <!-- 'dd/MM/yyyy': formato día/mes/año -->
                                            <span th:text="${#temporals.format(user.fechaRegistro, 'dd/MM/yyyy')}">
                                                01/01/2025
                                            </span>
                                        </p>
                                        <small class="text-muted">
                                            <!-- Hora en formato de 12 horas con AM/PM -->
                                            <i class="fas fa-clock"></i>
                                            <span th:text="${#temporals.format(user.fechaRegistro, 'hh:mm a')}">
                                                10:30 AM
                                            </span>
                                        </small>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <!-- Card para última actualización -->
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h6 class="card-subtitle mb-2 text-primary">
                                            <!-- text-primary: color azul -->
                                            <i class="fas fa-calendar-check"></i> Última Actualización
                                        </h6>
                                        <p class="card-text fs-5">
                                            <span th:text="${#temporals.format(user.fechaActualizacion, 'dd/MM/yyyy')}">
                                                01/01/2025
                                            </span>
                                        </p>
                                        <small class="text-muted">
                                            <i class="fas fa-clock"></i>
                                            <span th:text="${#temporals.format(user.fechaActualizacion, 'hh:mm a')}">
                                                03:45 PM
                                            </span>
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <hr class="my-4">
                        <!-- my-4: margin vertical (top y bottom) -->

                        <!-- CÁLCULO DE DÍAS DESDE CREACIÓN -->
                        <div class="alert alert-info">
                            <!-- alert-info: caja azul claro informativa -->
                            <i class="fas fa-info-circle"></i>
                            <strong>Usuario creado hace: </strong>

                            <!-- th:with: define variables temporales en Thymeleaf -->
                            <!-- Calcula días entre fecha de registro y hoy -->
                            <span th:with="dias=${#temporals.daysBetween(user.fechaRegistro, #temporals.createNow())}">
                                <!-- #temporals.daysBetween(fecha1, fecha2): días entre dos fechas -->
                                <!-- #temporals.createNow(): fecha y hora actual -->

                                <!-- th:text="|...|": literal string con variables -->
                                <span th:text="|${dias} día(s)|">X días</span>
                            </span>
                        </div>

                        <!-- INFORMACIÓN ADICIONAL EN TABLA -->
                        <h6 class="text-muted mb-3 mt-4">
                            <i class="fas fa-table"></i> Resumen Completo
                        </h6>

                        <table class="table table-bordered table-hover">
                            <!-- table-bordered: bordes en todas las celdas -->
                            <tbody>
                                <tr>
                                    <th class="w-25 bg-light">
                                        <!-- w-25: width 25% -->
                                        <!-- bg-light: fondo gris claro -->
                                        <i class="fas fa-hashtag text-primary"></i> ID
                                    </th>
                                    <td th:text="${user.id}">1</td>
                                </tr>
                                <tr>
                                    <th class="bg-light">
                                        <i class="fas fa-user text-primary"></i> Administrador
                                    </th>
                                    <td th:text="${user.administrador}">admin1</td>
                                </tr>
                                <tr>
                                    <th class="bg-light">
                                        <i class="fas fa-list-ol text-primary"></i> Cuentas
                                    </th>
                                    <td th:text="${user.cuentas}">0</td>
                                </tr>
                                <tr>
                                    <th class="bg-light">
                                        <i class="fas fa-calendar-plus text-primary"></i> Fecha Registro
                                    </th>
                                    <td>
                                        <!-- Formato largo: Miércoles, 15 de Enero de 2025, 10:30:45 AM -->
                                        <span
                                            th:text="${#temporals.format(user.fechaRegistro, 'EEEE, dd \'de\' MMMM \'de\' yyyy, hh:mm:ss a')}">
                                            Fecha completa
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <th class="bg-light">
                                        <i class="fas fa-calendar-check text-primary"></i> Última Actualización
                                    </th>
                                    <td>
                                        <span
                                            th:text="${#temporals.format(user.fechaActualizacion, 'EEEE, dd \'de\' MMMM \'de\' yyyy, hh:mm:ss a')}">
                                            Fecha completa
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- PIE DE TARJETA CON BOTONES DE ACCIÓN -->
                    <div class="card-footer bg-light">
                        <div class="d-flex justify-content-between">

                            <!-- Grupo de botones izquierdo -->
                            <div>
                                <!-- BOTÓN VOLVER -->
                                <a th:href="@{/users}" class="btn btn-secondary">
                                    <i class="fas fa-arrow-left"></i> Volver a la Lista
                                </a>
                            </div>

                            <!-- Grupo de botones derecho -->
                            <div>
                                <!-- BOTÓN EDITAR -->
                                <!-- th:href="@{/users/edit/{id}(id=${user.id})}": -->
                                <!-- Genera: /users/edit/5 -->
                                <a th:href="@{/users/edit/{id}(id=${user.id})}" class="btn btn-warning">
                                    <i class="fas fa-edit"></i> Editar
                                </a>

                                <!-- BOTÓN ELIMINAR -->
                                <a th:href="@{/users/delete/{id}(id=${user.id})}" class="btn btn-danger"
                                    onclick="return confirm('¿Está seguro de eliminar este usuario?');">
                                    <!-- onclick: JavaScript para confirmar antes de eliminar -->
                                    <i class="fas fa-trash"></i> Eliminar
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>

<!-- 
===== UBICACIÓN DEL ARCHIVO =====
src/main/resources/templates/users/view.html

===== FLUJO DE NAVEGACIÓN =====
1. Usuario está en lista (list.html)
2. Hace clic en botón "Ver" (ícono de ojo)
3. GET /users/5 → viewUser(5)
4. Controller busca usuario con ID 5
5. Agrega usuario al Model
6. Retorna "users/view"
7. Thymeleaf renderiza view.html con datos del usuario
8. Navegador muestra la página completa

===== FORMATOS DE FECHA EN THYMELEAF =====

dd/MM/yyyy           → 15/01/2025
MM/dd/yyyy           → 01/15/2025
yyyy-MM-dd           → 2025-01-15
dd-MMM-yyyy          → 15-Ene-2025
EEEE, dd MMMM yyyy   → Miércoles, 15 Enero 2025
hh:mm a              → 10:30 AM
HH:mm:ss             → 14:30:45
dd/MM/yyyy HH:mm     → 15/01/2025 14:30

dd   = día del mes (01-31)
MM   = mes numérico (01-12)
MMM  = mes abreviado (Ene, Feb)
MMMM = mes completo (Enero, Febrero)
yyyy = año (2025)
EEEE = día de la semana (Lunes, Martes)
hh   = hora 12h (01-12)
HH   = hora 24h (00-23)
mm   = minutos (00-59)
ss   = segundos (00-59)
a    = AM/PM

===== UTILIDADES DE #temporals =====

${#temporals.format(fecha, 'dd/MM/yyyy')}        - Formatear fecha
${#temporals.createNow()}                        - Fecha/hora actual
${#temporals.createToday()}                      - Solo fecha actual
${#temporals.day(fecha)}                         - Extraer día
${#temporals.month(fecha)}                       - Extraer mes
${#temporals.year(fecha)}                        - Extraer año
${#temporals.daysBetween(fecha1, fecha2)}        - Días entre fechas
${#temporals.monthsBetween(fecha1, fecha2)}      - Meses entre fechas
${#temporals.yearsBetween(fecha1, fecha2)}       - Años entre fechas

===== th:with EXPLICADO =====

Sin th:with (repitiendo cálculo):
<span th:text="${#temporals.daysBetween(user.fechaRegistro, #temporals.createNow())}"></span>
Usuario creado hace <span th:text="${#temporals.daysBetween(user.fechaRegistro, #temporals.createNow())}"></span> días

Con th:with (calcula una vez, usa variable):
<div th:with="dias=${#temporals.daysBetween(user.fechaRegistro, #temporals.createNow())}">
    <span th:text="${dias}"></span>
    Usuario creado hace <span th:text="${dias}"></span> días
</div>

===== th:classappend vs th:class =====

th:class="${condición ? 'clase1' : 'clase2'}":
- REEMPLAZA todas las clases existentes
Ejemplo: <span class="badge" th:class="${activo ? 'bg-success' : 'bg-danger'}">
Resultado: <span class="bg-success"> (perdió "badge")

th:classappend="${condición ? 'clase1' : 'clase2'}":
- AGREGA clases sin borrar las existentes
Ejemplo: <span class="badge" th:classappend="${activo ? 'bg-success' : 'bg-danger'}">
Resultado: <span class="badge bg-success"> (mantiene "badge")
-->