<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión de Cuentas</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* Hero section mejorado */
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 80px 0;
            margin-bottom: 50px;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120"><path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="rgba(255,255,255,0.1)"></path></svg>') no-repeat;
            background-size: cover;
            opacity: 0.3;
        }

        /* Cards animadas */
        .stat-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: none;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:hover {
            transform: translateY(-15px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        /* Contador animado */
        .counter {
            font-size: 3.5rem;
            font-weight: 800;
            animation: countUp 1s ease-out;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        @keyframes countUp {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.5);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* Progress bar mejorada */
        .progress {
            height: 8px;
            border-radius: 10px;
            overflow: visible;
        }

        .progress-bar {
            border-radius: 10px;
            position: relative;
            overflow: visible;
            animation: progressAnimation 1.5s ease-out;
        }

        @keyframes progressAnimation {
            from {
                width: 0;
            }
        }

        /* Botones mejorados */
        .btn-custom {
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
        }

        .btn-custom::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn-custom:hover::after {
            width: 300px;
            height: 300px;
        }

        /* Badge mejorado */
        .badge-custom {
            padding: 8px 16px;
            font-size: 0.9rem;
            border-radius: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }
    </style>
</head>

<body>

    <!-- HERO SECTION -->
    <div class="hero-section">
        <div class="container text-center position-relative">
            <h1 class="display-2 mb-4 fw-bold">
                <i class="fas fa-layer-group"></i>
                Sistema de Gestión
            </h1>
            <p class="lead fs-3 mb-5">
                Control total de usuarios, correos y cuentas de servicios
            </p>
            <div class="d-flex justify-content-center gap-4 flex-wrap">
                <a th:href="@{/users}" class="btn btn-light btn-lg btn-custom px-5 py-3">
                    <i class="fas fa-users me-2"></i> Gestionar Usuarios
                </a>
                <a th:href="@{/gmails}" class="btn btn-outline-light btn-lg btn-custom px-5 py-3">
                    <i class="fas fa-envelope me-2"></i> Gestionar Correos
                </a>
                <a th:href="@{/accounts}" class="btn btn-outline-light btn-lg btn-custom px-5 py-3">
                    <i class="fas fa-id-card me-2"></i> Gestionar Cuentas
                </a>
            </div>
        </div>
    </div>

    <div class="container mb-5">

        <!-- MENSAJE DE ERROR -->
        <div th:if="${error}" class="alert alert-danger alert-dismissible fade show shadow">
            <i class="fas fa-exclamation-triangle"></i>
            <span th:text="${error}">Error</span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <!-- TÍTULO DE ESTADÍSTICAS -->
        <div class="text-center mb-5">
            <h2 class="display-5 mb-3">
                <i class="fas fa-chart-line text-primary"></i>
                Panel de Control
            </h2>
            <p class="text-muted fs-5">Estadísticas en tiempo real del sistema</p>
        </div>

        <!-- ESTADÍSTICAS PRINCIPALES -->
        <div class="row g-4 mb-5">

            <!-- USUARIOS -->
            <div class="col-lg-4 col-md-6">
                <a th:href="@{/users}" class="text-decoration-none">
                    <div class="card stat-card shadow-lg">
                        <div class="card-body text-center p-4 bg-gradient"
                            style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-users fa-4x text-white mb-3"></i>
                            <h5 class="card-title text-white fw-bold">Usuarios Registrados</h5>
                            <p class="counter text-white mb-2" th:text="${totalUsers}">0</p>
                            <p class="text-white-50 mb-0">
                                <i class="fas fa-arrow-up me-1"></i> Total en el sistema
                            </p>
                        </div>
                        <div class="card-footer bg-white border-0 p-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <small class="text-muted">
                                    <i class="fas fa-clock me-1"></i> Actualizado ahora
                                </small>
                                <span class="badge bg-primary">Ver todos <i class="fas fa-arrow-right ms-1"></i></span>
                            </div>
                        </div>
                    </div>
                </a>
            </div>

            <!-- CORREOS GMAIL -->
            <div class="col-lg-4 col-md-6">
                <a th:href="@{/gmails}" class="text-decoration-none">
                    <div class="card stat-card shadow-lg">
                        <div class="card-body text-center p-4 bg-gradient"
                            style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
                            <i class="fas fa-envelope fa-4x text-white mb-3"></i>
                            <h5 class="card-title text-white fw-bold">Correos Gmail</h5>
                            <p class="counter text-white mb-2" th:text="${totalGmails}">0</p>
                            <p class="text-white-50 mb-0">
                                <i class="fas fa-at me-1"></i> Correos registrados
                            </p>
                        </div>
                        <div class="card-footer bg-white border-0 p-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <small class="text-muted">
                                    <i class="fas fa-shield-alt me-1"></i> Seguros
                                </small>
                                <span class="badge bg-success">Ver todos <i class="fas fa-arrow-right ms-1"></i></span>
                            </div>
                        </div>
                    </div>
                </a>
            </div>

            <!-- CUENTAS -->
            <div class="col-lg-4 col-md-6">
                <a th:href="@{/accounts}" class="text-decoration-none">
                    <div class="card stat-card shadow-lg">
                        <div class="card-body text-center p-4 bg-gradient"
                            style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <i class="fas fa-id-card fa-4x text-white mb-3"></i>
                            <h5 class="card-title text-white fw-bold">Cuentas de Servicios</h5>
                            <p class="counter text-white mb-2" th:text="${totalAccounts}">0</p>
                            <p class="text-white-50 mb-0">
                                <i class="fas fa-film me-1"></i> Servicios gestionados
                            </p>
                        </div>
                        <div class="card-footer bg-white border-0 p-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <small class="text-muted">
                                    <i class="fas fa-check-circle me-1"></i> Activas
                                </small>
                                <span class="badge bg-info">Ver todas <i class="fas fa-arrow-right ms-1"></i></span>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </div>

        <!-- ESTADO DE CUENTAS -->
        <div class="row g-4 mb-5">

            <!-- ACTIVAS -->
            <div class="col-md-6">
                <a th:href="@{/accounts/activo/true}" class="text-decoration-none">
                    <div class="card stat-card shadow-lg border-0">
                        <div class="card-body p-4">
                            <div class="d-flex justify-content-between align-items-start mb-3">
                                <div>
                                    <h6 class="text-muted mb-2 text-uppercase">
                                        <i class="fas fa-toggle-on text-success"></i>
                                        Cuentas Activas
                                    </h6>
                                    <h2 class="mb-0 fw-bold text-success" th:text="${activeAccounts}">0</h2>
                                </div>
                                <div class="bg-success bg-opacity-10 p-3 rounded">
                                    <i class="fas fa-check-double fa-2x text-success"></i>
                                </div>
                            </div>

                            <div th:if="${totalAccounts > 0}"
                                th:with="porcentaje=${(activeAccounts * 100) / totalAccounts}">
                                <div class="progress mb-2">
                                    <div class="progress-bar bg-success" th:style="|width: ${porcentaje}%|"
                                        th:text="|${#numbers.formatDecimal(porcentaje, 1, 1)}%|">
                                    </div>
                                </div>
                                <small class="text-muted">
                                    <span th:text="|${#numbers.formatDecimal(porcentaje, 1, 1)}% del total|"></span>
                                </small>
                            </div>
                        </div>
                    </div>
                </a>
            </div>

            <!-- INACTIVAS -->
            <div class="col-md-6">
                <a th:href="@{/accounts/activo/false}" class="text-decoration-none">
                    <div class="card stat-card shadow-lg border-0">
                        <div class="card-body p-4">
                            <div class="d-flex justify-content-between align-items-start mb-3">
                                <div>
                                    <h6 class="text-muted mb-2 text-uppercase">
                                        <i class="fas fa-toggle-off text-secondary"></i>
                                        Cuentas Inactivas
                                    </h6>
                                    <h2 class="mb-0 fw-bold text-secondary" th:text="${inactiveAccounts}">0</h2>
                                </div>
                                <div class="bg-secondary bg-opacity-10 p-3 rounded">
                                    <i class="fas fa-pause-circle fa-2x text-secondary"></i>
                                </div>
                            </div>

                            <div th:if="${totalAccounts > 0}"
                                th:with="porcentaje=${(inactiveAccounts * 100) / totalAccounts}">
                                <div class="progress mb-2">
                                    <div class="progress-bar bg-secondary" th:style="|width: ${porcentaje}%|"
                                        th:text="|${#numbers.formatDecimal(porcentaje, 1, 1)}%|">
                                    </div>
                                </div>
                                <small class="text-muted">
                                    <span th:text="|${#numbers.formatDecimal(porcentaje, 1, 1)}% del total|"></span>
                                </small>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </div>

        <!-- ACCESOS RÁPIDOS MEJORADO -->
        <div class="card shadow-lg border-0 mb-5">
            <div class="card-header bg-dark text-white p-4">
                <h4 class="mb-0">
                    <i class="fas fa-rocket me-2"></i> Accesos Rápidos
                </h4>
            </div>
            <div class="card-body p-4">
                <div class="row g-3">

                    <div class="col-lg-3 col-md-6">
                        <a th:href="@{/users/new}" class="btn btn-outline-primary w-100 p-4 btn-custom">
                            <i class="fas fa-user-plus fa-3x mb-3 d-block"></i>
                            <strong class="d-block">Crear Usuario</strong>
                            <small class="text-muted">Nuevo usuario del sistema</small>
                        </a>
                    </div>

                    <div class="col-lg-3 col-md-6">
                        <a th:href="@{/gmails/new}" class="btn btn-outline-success w-100 p-4 btn-custom">
                            <i class="fas fa-envelope-open fa-3x mb-3 d-block"></i>
                            <strong class="d-block">Crear Correo</strong>
                            <small class="text-muted">Nuevo correo Gmail</small>
                        </a>
                    </div>

                    <div class="col-lg-3 col-md-6">
                        <a th:href="@{/accounts/new}" class="btn btn-outline-info w-100 p-4 btn-custom">
                            <i class="fas fa-plus-circle fa-3x mb-3 d-block"></i>
                            <strong class="d-block">Crear Cuenta</strong>
                            <small class="text-muted">Nueva cuenta de servicio</small>
                        </a>
                    </div>

                    <div class="col-lg-3 col-md-6">
                        <a th:href="@{/users}" class="btn btn-outline-secondary w-100 p-4 btn-custom">
                            <i class="fas fa-list fa-3x mb-3 d-block"></i>
                            <strong class="d-block">Ver Todos</strong>
                            <small class="text-muted">Todos los registros</small>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- NAVEGACIÓN POR SERVICIOS -->
        <div class="card shadow-lg border-0 mb-5">
            <div class="card-header bg-primary bg-gradient text-white p-4">
                <h4 class="mb-0">
                    <i class="fas fa-filter me-2"></i> Filtrar por Servicio
                </h4>
            </div>
            <div class="card-body p-4">
                <div class="row g-3">
                    <div class="col-6 col-md-4 col-lg-2">
                        <a th:href="@{/accounts/tipo/Netflix}" class="btn btn-outline-danger w-100 p-3">
                            <i class="fas fa-film d-block fa-2x mb-2"></i>
                            <small class="fw-bold">Netflix</small>
                        </a>
                    </div>
                    <div class="col-6 col-md-4 col-lg-2">
                        <a th:href="@{/accounts/tipo/Spotify}" class="btn btn-outline-success w-100 p-3">
                            <i class="fas fa-music d-block fa-2x mb-2"></i>
                            <small class="fw-bold">Spotify</small>
                        </a>
                    </div>
                    <div class="col-6 col-md-4 col-lg-2">
                        <a th:href="@{/accounts/tipo/Amazon}" class="btn btn-outline-warning w-100 p-3">
                            <i class="fas fa-shopping-cart d-block fa-2x mb-2"></i>
                            <small class="fw-bold">Amazon</small>
                        </a>
                    </div>
                    <div class="col-6 col-md-4 col-lg-2">
                        <a th:href="@{/accounts/tipo/Disney+}" class="btn btn-outline-primary w-100 p-3">
                            <i class="fas fa-star d-block fa-2x mb-2"></i>
                            <small class="fw-bold">Disney+</small>
                        </a>
                    </div>
                    <div class="col-6 col-md-4 col-lg-2">
                        <a th:href="@{/accounts/tipo/HBO Max}" class="btn btn-outline-secondary w-100 p-3">
                            <i class="fas fa-tv d-block fa-2x mb-2"></i>
                            <small class="fw-bold">HBO Max</small>
                        </a>
                    </div>
                    <div class="col-6 col-md-4 col-lg-2">
                        <a th:href="@{/accounts}" class="btn btn-outline-dark w-100 p-3">
                            <i class="fas fa-th d-block fa-2x mb-2"></i>
                            <small class="fw-bold">Ver Todos</small>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER MEJORADO -->
    <footer class="bg-dark text-white py-5 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <h5 class="mb-3">
                        <i class="fas fa-layer-group me-2"></i>
                        Sistema de Gestión
                    </h5>
                    <p class="text-white-50">
                        Plataforma completa para administrar usuarios, correos y cuentas de servicios de streaming.
                    </p>
                </div>
                <div class="col-md-4 mb-4">
                    <h5 class="mb-3">Enlaces Rápidos</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <a th:href="@{/users}" class="text-white-50 text-decoration-none">
                                <i class="fas fa-users me-2"></i> Usuarios
                            </a>
                        </li>
                        <li class="mb-2">
                            <a th:href="@{/gmails}" class="text-white-50 text-decoration-none">
                                <i class="fas fa-envelope me-2"></i> Correos Gmail
                            </a>
                        </li>
                        <li class="mb-2">
                            <a th:href="@{/accounts}" class="text-white-50 text-decoration-none">
                                <i class="fas fa-id-card me-2"></i> Cuentas
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="col-md-4 mb-4">
                    <h5 class="mb-3">Tecnologías</h5>
                    <div class="d-flex flex-wrap gap-2">
                        <span class="badge bg-primary badge-custom">Spring Boot</span>
                        <span class="badge bg-success badge-custom">Thymeleaf</span>
                        <span class="badge bg-info badge-custom">Bootstrap 5</span>
                        <span class="badge bg-warning text-dark badge-custom">MySQL</span>
                        <span class="badge bg-danger badge-custom">JPA</span>
                    </div>
                </div>
            </div>
            <hr class="my-4 bg-white">
            <div class="text-center">
                <p class="mb-0 text-white-50">
                    © 2025 Sistema de Gestión de Cuentas - Desarrollado con <i class="fas fa-heart text-danger"></i>
                </p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Animación de contadores
        document.addEventListener('DOMContentLoaded', function () {
            const counters = document.querySelectorAll('.counter');
            counters.forEach(counter => {
                const target = parseInt(counter.innerText);
                let count = 0;
                const duration = 1500;
                const increment = target / (duration / 16);

                const updateCount = () => {
                    count += increment;
                    if (count < target) {
                        counter.innerText = Math.ceil(count);
                        requestAnimationFrame(updateCount);
                    } else {
                        counter.innerText = target;
                    }
                };

                updateCount();
            });
        });
    </script>
</body>

</html>